{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Eliezer Muller\\\\Desktop\\\\FinalProject\\\\client\\\\src\\\\EditUserPage.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction EditUserPageComp(props) {\n  _s();\n\n  const [user, setUser] = useState({});\n  const [userName, setUserName] = useState(\"\");\n  const [sessionTimeout, setSessionTimeOut] = useState(\"\");\n  const [createdDate, setCreatedData] = useState(\"\");\n  const [permissions, setPermissions] = useState([]);\n  useEffect(() => {\n    async function loadUser() {\n      let resp = await axios.get(\"http://localhost:8000/api/users/\" + props.match.params.id);\n      let userMatch = resp.data;\n      setUser(userMatch);\n      setUserName(userMatch.UserName);\n      setSessionTimeOut(userMatch.SessionTimeout);\n      setCreatedData(userMatch.CreatedDate);\n      setPermissions(userMatch.Permissions);\n\n      if (userMatch.Permissions != null) {\n        if (userMatch.Permissions.includes(\"ViewSubscriptions\")) {\n          document.getElementById(\"ViewSubscriptions\").checked = true;\n        }\n\n        if (userMatch.Permissions.includes(\"CreateSubscriptions\")) {\n          document.getElementById(\"CreateSubscriptions\").checked = true;\n        }\n\n        if (userMatch.Permissions.includes(\"DeleteSubscriptions\")) {\n          document.getElementById(\"DeleteSubscriptions\").checked = true;\n        }\n\n        if (userMatch.Permissions.includes(\"ViewMovies\")) {\n          document.getElementById(\"ViewMovies\").checked = true;\n        }\n\n        if (userMatch.Permissions.includes(\"CreateMovies\")) {\n          document.getElementById(\"CreateMovies\").checked = true;\n        }\n\n        if (userMatch.Permissions.includes(\"DeleteMovies\")) {\n          document.getElementById(\"DeleteMovies\").checked = true;\n        }\n\n        if (userMatch.Permissions.includes(\"UpdateMovies\")) {\n          document.getElementById(\"UpdateMovies\").checked = true;\n        }\n      }\n    }\n\n    loadUser();\n  }, [props.match.params.id]);\n\n  function updatePermissions(perm) {\n    if (document.getElementById(perm).checked) {\n      let newPerms = [...permissions, perm];\n      setPermissions(newPerms);\n    } else if (!document.getElementById(perm).checked) {\n      let index = permissions.indexOf(perm);\n      let newPerms = [...permissions];\n      newPerms.splice(index, 1);\n      setPermissions(newPerms);\n    }\n  }\n\n  const update = async () => {\n    let newUser = {\n      Id: user.Id,\n      FirstName: user.FirstName,\n      LastName: user.LastName,\n      UserName: userName,\n      CreatedDate: createdDate,\n      SessionTimeout: sessionTimeout,\n      Permissions: permissions\n    };\n    let response = await axios.put(\"http://localhost:8000/api/users/\" + props.match.params.id, newUser); //update also the userName in loginUsers \n\n    let respUser = await axios.get(\"http://localhost:8000/api/login/\" + props.match.params.id);\n    let userLog = respUser.data;\n    let password = userLog.Password;\n    let newUserLogin = {\n      UserName: userName,\n      Password: password\n    };\n    let resp = await axios.put(\"http://localhost:8000/api/login/\" + props.match.params.id, newUserLogin);\n    let statusUsers = response.data;\n    let statusLogin = resp.data;\n\n    if (statusUsers == 'Updated' && statusLogin == 'Updated') {\n      alert(\"Updated\");\n      props.history.push('/MainPage/UsersManagement');\n    } else alert(\"An error that occured\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"item\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\" \", user.FirstName, \" \", user.LastName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: update,\n        children: [\"User Name: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"inputTextForm\",\n          id: \"UserName\",\n          defaultValue: user.UserName,\n          onChange: e => {\n            setUserName(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 20\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 160\n        }, this), \"Sesion time out (Minutes): \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"inputTextForm\",\n          id: \"SessionTimeout\",\n          defaultValue: user.SessionTimeout,\n          onChange: e => {\n            setSessionTimeOut(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 36\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 194\n        }, this), \"Created date : \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"inputTextForm\",\n          id: \"CreatedDate\",\n          defaultValue: user.CreatedDate,\n          onChange: e => {\n            setCreatedData(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 24\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 173\n        }, this), \"Permissions : \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"ViewSubscriptions\",\n          onChange: e => {\n            updatePermissions(\"ViewSubscriptions\");\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 9\n        }, this), \" View Subscriptions \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 134\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"CreateSubscriptions\",\n          onChange: e => {\n            updatePermissions(\"CreateSubscriptions\");\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 9\n        }, this), \" Create Subscriptions \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 139\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"DeleteSubscriptions\",\n          onChange: e => {\n            updatePermissions(\"DeleteSubscriptions\");\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 9\n        }, this), \" Delete Subscriptions \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 139\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"ViewMovies\",\n          onChange: e => {\n            updatePermissions(\"ViewMovies\");\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 9\n        }, this), \" View Movies\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 111\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"CreateMovies\",\n          onChange: e => {\n            updatePermissions(\"CreateMovies\");\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 9\n        }, this), \" Create Movies \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 118\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"DeleteMovies\",\n          onChange: e => {\n            updatePermissions(\"DeleteMovies\");\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 9\n        }, this), \" Delete Movies \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 118\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"UpdateMovies\",\n          onChange: e => {\n            updatePermissions(\"UpdateMovies\");\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 9\n        }, this), \" Update Movies \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 118\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 124\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Update\",\n          className: \"onelowbutton\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Cancel\",\n          className: \"twolowbutton\",\n          onClick: e => {\n            props.history.push(\"/MainPage/UsersManagement\");\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditUserPageComp, \"VbFgsJCYFSzNkHcqSbzLI8+dyeo=\");\n\n_c = EditUserPageComp;\nexport default EditUserPageComp;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditUserPageComp\");","map":{"version":3,"sources":["C:/Users/Eliezer Muller/Desktop/FinalProject/client/src/EditUserPage.js"],"names":["useState","useEffect","axios","EditUserPageComp","props","user","setUser","userName","setUserName","sessionTimeout","setSessionTimeOut","createdDate","setCreatedData","permissions","setPermissions","loadUser","resp","get","match","params","id","userMatch","data","UserName","SessionTimeout","CreatedDate","Permissions","includes","document","getElementById","checked","updatePermissions","perm","newPerms","index","indexOf","splice","update","newUser","Id","FirstName","LastName","response","put","respUser","userLog","password","Password","newUserLogin","statusUsers","statusLogin","alert","history","push","e","target","value"],"mappings":"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","sourcesContent":["\r\n  import {useState,useEffect} from 'react'\r\n  import axios from 'axios'\r\n\r\nfunction EditUserPageComp(props) {\r\n\r\n  const [user,setUser] =useState({})\r\n  const [userName,setUserName] = useState(\"\")\r\n  const [sessionTimeout,setSessionTimeOut] = useState(\"\")\r\n  const [createdDate,setCreatedData] = useState(\"\")\r\n  const [permissions,setPermissions] = useState([])\r\n  \r\n  useEffect(()=>\r\n  \r\n  {\r\n    async function loadUser ()\r\n    {\r\n\r\n      let resp = await axios.get(\"http://localhost:8000/api/users/\"+props.match.params.id)\r\n      let userMatch =resp.data\r\n\r\n      setUser(userMatch)\r\n      setUserName(userMatch.UserName)\r\n      setSessionTimeOut(userMatch.SessionTimeout)\r\n      setCreatedData(userMatch.CreatedDate)\r\n      setPermissions(userMatch.Permissions)\r\n    \r\n      if(userMatch.Permissions!=null) \r\n\r\n     {\r\n      if(userMatch.Permissions.includes(\"ViewSubscriptions\"))\r\n\r\n      {document.getElementById(\"ViewSubscriptions\").checked=true}\r\n\r\n      if(userMatch.Permissions.includes(\"CreateSubscriptions\"))\r\n\r\n      {document.getElementById(\"CreateSubscriptions\").checked=true}\r\n\r\n      if(userMatch.Permissions.includes(\"DeleteSubscriptions\"))\r\n\r\n      {document.getElementById(\"DeleteSubscriptions\").checked=true}\r\n\r\n      \r\n      if(userMatch.Permissions.includes(\"ViewMovies\"))\r\n\r\n      {document.getElementById(\"ViewMovies\").checked=true}\r\n      \r\n      if(userMatch.Permissions.includes(\"CreateMovies\"))\r\n\r\n      {document.getElementById(\"CreateMovies\").checked=true}\r\n     \r\n      if(userMatch.Permissions.includes(\"DeleteMovies\"))\r\n\r\n      {document.getElementById(\"DeleteMovies\").checked=true}\r\n\r\n      if(userMatch.Permissions.includes(\"UpdateMovies\"))\r\n\r\n      {document.getElementById(\"UpdateMovies\").checked=true}\r\n\r\n     }\r\n      \r\n    }\r\n    \r\n    loadUser()\r\n    \r\n  }\r\n  \r\n  ,[props.match.params.id])\r\n\r\n  function updatePermissions(perm)\r\n  {\r\n    if(document.getElementById(perm).checked)    \r\n    { \r\n        \r\n        let  newPerms =[...permissions,perm]\r\n        setPermissions(newPerms)\r\n\r\n    }\r\n  \r\n    \r\n    else if(!(document.getElementById(perm).checked))\r\n    {\r\n      \r\n        let index = permissions.indexOf(perm)\r\n        let newPerms = [...permissions]\r\n        newPerms.splice(index,1)\r\n        setPermissions(newPerms)\r\n      \r\n    }\r\n    \r\n  }\r\n\r\n  const update=async()=>\r\n  {\r\n    let newUser = {Id: user.Id,FirstName : user.FirstName, LastName : user.LastName, UserName: userName, CreatedDate : createdDate,\r\n      SessionTimeout : sessionTimeout, Permissions : permissions }\r\n\r\n    let response = await axios.put(\"http://localhost:8000/api/users/\"+props.match.params.id,newUser)\r\n\r\n    //update also the userName in loginUsers \r\n    let respUser = await axios.get(\"http://localhost:8000/api/login/\"+props.match.params.id)\r\n    let userLog = respUser.data\r\n    let password = userLog.Password\r\n\r\n    let newUserLogin = {UserName:userName,Password:password}\r\n\r\n    let resp = await axios.put(\"http://localhost:8000/api/login/\"+props.match.params.id,newUserLogin)\r\n    \r\n    let statusUsers = response.data\r\n    let statusLogin = resp.data\r\n\r\n    if(statusUsers=='Updated'&& statusLogin=='Updated')\r\n    {\r\n      alert(\"Updated\")\r\n      props.history.push('/MainPage/UsersManagement')\r\n    }\r\n\r\n    else alert(\"An error that occured\")\r\n\r\n  }\r\n\r\n\r\n  return (\r\n   \r\n    <div className=\"item\">\r\n\r\n        <div className=\"text\">\r\n      \r\n      <h2> {user.FirstName} {user.LastName}</h2>\r\n\r\n      <form onSubmit={update}>\r\n\r\n        User Name: <input type = \"text\" className =\"inputTextForm\" id = \"UserName\" defaultValue ={user.UserName} onChange={e=>{setUserName(e.target.value)}}/> <br/> \r\n        Sesion time out (Minutes): <input type = \"text\" className =\"inputTextForm\" id = \"SessionTimeout\" defaultValue ={user.SessionTimeout} onChange={e=>{setSessionTimeOut(e.target.value)}}/> <br/>\r\n        Created date : <input type = \"text\" className =\"inputTextForm\" id = \"CreatedDate\" defaultValue ={user.CreatedDate} onChange={e=>{setCreatedData(e.target.value)}}/> <br/>\r\n        Permissions : <br/>  \r\n        \r\n        <input type=\"checkbox\" id={\"ViewSubscriptions\"} onChange={e=>{updatePermissions(\"ViewSubscriptions\")}} /> View Subscriptions <br/>\r\n        <input type=\"checkbox\" id={\"CreateSubscriptions\"} onChange={e=>{updatePermissions(\"CreateSubscriptions\")}}/> Create Subscriptions <br/>\r\n        <input type=\"checkbox\" id={\"DeleteSubscriptions\"} onChange={e=>{updatePermissions(\"DeleteSubscriptions\")}}/> Delete Subscriptions <br/>\r\n        <input type=\"checkbox\" id={\"ViewMovies\"} onChange={e=>{updatePermissions(\"ViewMovies\")}}/> View Movies<br/>\r\n        <input type=\"checkbox\" id={\"CreateMovies\"} onChange={e=>{updatePermissions(\"CreateMovies\")}}/> Create Movies <br/>\r\n        <input type=\"checkbox\" id={\"DeleteMovies\"} onChange={e=>{updatePermissions(\"DeleteMovies\")}}/> Delete Movies <br/>\r\n        <input type=\"checkbox\" id={\"UpdateMovies\"} onChange={e=>{updatePermissions(\"UpdateMovies\")}}/> Update Movies <br/> <br/>\r\n\r\n        <input type=\"submit\" value=\"Update\" className=\"onelowbutton\" />\r\n        <input type=\"submit\" value=\"Cancel\" className=\"twolowbutton\"onClick={e=>{props.history.push(\"/MainPage/UsersManagement\")}}/>\r\n\r\n      </form>\r\n\r\n      </div>\r\n\r\n    </div>\r\n\r\n    \r\n  );\r\n}\r\n\r\nexport default EditUserPageComp;"]},"metadata":{},"sourceType":"module"}